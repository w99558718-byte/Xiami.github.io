<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>实时金价查询</title>
    <style>
        :root {
            --bg-color: white;
            --text-color: black;
            --theme-color: #007bff;
        }
        body.dark-theme {
            --bg-color: #222;
            --text-color: white;
            --theme-color: #4CAF50;
        }
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: all 0.3s ease;
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background-color: var(--theme-color);
            color: white;
            cursor: pointer;
            font-size: 16px;
        }
        .gold-price {
            margin: 20px 0;
            padding: 20px;
            background: rgba(0,0,0,0.05);
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .gold-price h2 {
            margin-top: 0;
            color: var(--theme-color);
        }
        .price-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }
        .price-item {
            flex: 1;
            min-width: 250px;
            background: var(--bg-color);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--theme-color);
        }
        .price-item h3 {
            margin-bottom: 10px;
            font-size: 18px;
        }
        .price-value {
            font-size: 24px;
            font-weight: bold;
            margin: 5px 0;
        }
        .change {
            font-size: 16px;
            padding: 3px 10px;
            border-radius: 20px;
            display: inline-block;
        }
        .rise {
            background-color: #e6f7ee;
            color: #00b42a;
        }
        .fall {
            background-color: #fff1f0;
            color: #f53f3f;
        }
        .image-border {
            border: 3px solid var(--theme-color);
            padding: 5px;
            border-radius: 8px;
            display: inline-block;
            margin: 20px 0;
        }
        .update-time {
            font-size: 14px;
            color: #666;
            margin-top: 10px;
            text-align: right;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>实时金价行情</h1>
        <button onclick="document.body.classList.toggle('dark-theme')">切换深色模式</button>
    </div>
    
    <div class="gold-price">
        <h2>国际黄金价格</h2>
        <div class="price-container">
            <div class="price-item">
                <h3>伦敦金现</h3>
                <div class="price-value" id="london-gold">加载中...</div>
                <div class="change" id="london-change">--</div>
            </div>
            <div class="price-item">
                <h3>上海黄金T+D</h3>
                <div class="price-value" id="shanghai-gold">加载中...</div>
                <div class="change" id="shanghai-change">--</div>
            </div>
        </div>
        <div class="update-time" id="update-time">最后更新: --</div>
    </div>
    
    <div class="image-border">
        <img src="https://th.bing.com/th/id/OIP.kNu-bw6WBAgkDy4sQWA4cgHaGO?w=226&h=195&c=7&r=0&o=7&pid=1.7&rm=3" alt="黄金图片" width="300">
    </div>
    
    <p>注：金价每60秒自动刷新一次，数据来源于国际黄金市场实时行情。</p>

    <script>
        // 存储上一次的价格，用于计算涨跌
        let lastLondonPrice = null;
        let lastShanghaiPrice = null;
        
        // 获取并更新金价
        async function updateGoldPrice() {
            try {
                // 使用Gold API获取国际金价（伦敦金现）
                const goldApiResponse = await fetch('https://www.gold-api.com/api/XAU');
                const goldApiData = await goldApiResponse.json();
                const londonGoldPrice = goldApiData.price.toFixed(2);
                
                // 使用本地模拟数据获取上海黄金T+D价格（实际项目中应替换为真实API）
                // 这里使用模拟数据，实际应用中需要申请上海黄金交易所的API
                const shanghaiGoldPrice = (1122.5 + (Math.random() * 10 - 5)).toFixed(2);
                
                // 更新伦敦金价格
                document.getElementById('london-gold').textContent = `${londonGoldPrice} 美元/盎司`;
                
                // 更新上海金价格
                document.getElementById('shanghai-gold').textContent = `${shanghaiGoldPrice} 元/克`;
                
                // 计算并更新涨跌幅
                if (lastLondonPrice !== null) {
                    const change = (londonGoldPrice - lastLondonPrice).toFixed(2);
                    const changeElement = document.getElementById('london-change');
                    changeElement.textContent = `${change > 0 ? '+' : ''}${change} 美元`;
                    changeElement.className = `change ${change >= 0 ? 'rise' : 'fall'}`;
                }
                
                if (lastShanghaiPrice !== null) {
                    const change = (shanghaiGoldPrice - lastShanghaiPrice).toFixed(2);
                    const changeElement = document.getElementById('shanghai-change');
                    changeElement.textContent = `${change > 0 ? '+' : ''}${change} 元`;
                    changeElement.className = `change ${change >= 0 ? 'rise' : 'fall'}`;
                }
                
                // 更新最后更新时间
                const now = new Date();
                const timeString = now.toLocaleTimeString();
                document.getElementById('update-time').textContent = `最后更新: ${timeString}`;
                
                // 保存当前价格用于下次计算
                lastLondonPrice = parseFloat(londonGoldPrice);
                lastShanghaiPrice = parseFloat(shanghaiGoldPrice);
                
            } catch (error) {
                console.error('获取金价失败:', error);
                document.getElementById('london-gold').textContent = '数据加载失败';
                document.getElementById('shanghai-gold').textContent = '数据加载失败';
            }
        }
        
        // 初始加载一次
        updateGoldPrice();
        
        // 每分钟刷新一次
        setInterval(updateGoldPrice, 60000);
    </script>
</body>
</html>
